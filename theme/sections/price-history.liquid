{% assign history_heading = section.settings.heading | default: 'Price history' %}
{% assign analytics_heading = section.settings.heading | default: 'PRICING ANALYTICS & INTELLIGENCE' %}
<section class="pricing-analytics" id="PricingAnalytics" data-product-handle="{{ product.handle | default: '' }}">
  <div class="container">
    <header class="pricing-analytics__header">
      <h2 class="analytics-title">{{ analytics_heading }}</h2>
      <p class="analytics-subtitle">{{ section.settings.subheading | default: 'Data-gedreven prijsstrategie voor maximale business impact' }}</p>
      
      <!-- Business Performance Overview -->
      <div class="performance-overview">
        <div class="performance-metric">
          <span class="metric-icon">ðŸ“ˆ</span>
          <div class="metric-info">
            <span class="metric-value">+{{ section.settings.revenue_growth | default: 23 }}%</span>
            <span class="metric-label">Omzet groei</span>
          </div>
        </div>
        <div class="performance-metric">
          <span class="metric-icon">ðŸ’°</span>
          <div class="metric-info">
            <span class="metric-value">{{ section.settings.margin_improvement | default: 8.4 }}%</span>
            <span class="metric-label">Marge verbetering</span>
          </div>
        </div>
        <div class="performance-metric">
          <span class="metric-icon">ðŸŽ¯</span>
          <div class="metric-info">
            <span class="metric-value">{{ section.settings.price_accuracy | default: 94 }}%</span>
            <span class="metric-label">Prijsaccuraatheid</span>
          </div>
        </div>
        <div class="performance-metric">
          <span class="metric-icon">âš¡</span>
          <div class="metric-info">
            <span class="metric-value">{{ section.settings.response_time | default: 2.3 }}s</span>
            <span class="metric-label">Reactietijd</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Business Analytics Dashboard -->
    <div class="analytics-dashboard">
      <!-- Advanced Price Chart with Business Insights -->
      <div class="analytics-panel chart-panel">
        <div class="panel-header">
          <h3 class="panel-title">PRIJSONTWIKKELING & BUSINESS IMPACT</h3>
          <div class="chart-controls">
            <select id="chart-view" class="chart-select">
              <option value="profit">Winst analyse</option>
              <option value="market-share">Marktaandeel</option>
              <option value="competitor">Concurrentie vergelijking</option>
              <option value="roi">ROI ontwikkeling</option>
            </select>
            <div class="time-range-controls">
              <button class="time-btn active" data-range="7d">7D</button>
              <button class="time-btn" data-range="30d">30D</button>
              <button class="time-btn" data-range="90d">90D</button>
              <button class="time-btn" data-range="1y">1Y</button>
            </div>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="BusinessAnalyticsChart" width="800" height="400"></canvas>
          <div class="chart-insights">
            <div class="insight-item">
              <span class="insight-label">Optimale prijs:</span>
              <span class="insight-value price-optimal">â‚¬{{ section.settings.optimal_price | default: 1249 | money_without_currency }}</span>
            </div>
            <div class="insight-item">
              <span class="insight-label">Geschatte impact:</span>
              <span class="insight-value impact-positive">+â‚¬{{ section.settings.estimated_impact | default: 3450 | money_without_currency }} per maand</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Business Intelligence Panels -->
      <div class="intelligence-panels">
        <!-- Market Position Analysis -->
        <div class="analytics-panel market-position">
          <h3 class="panel-title">MARKTPOSITIE ANALYSE</h3>
          <div class="position-metrics">
            <div class="position-item">
              <span class="position-rank">#{{ section.settings.market_rank | default: 2 }}</span>
              <span class="position-label">Marktpositie</span>
              <span class="position-change positive">â†‘1</span>
            </div>
            <div class="market-share-chart">
              <div class="share-segment your-share" style="width: {{ section.settings.market_share | default: 24 }}%">
                <span class="share-label">Jouw aandeel: {{ section.settings.market_share | default: 24 }}%</span>
              </div>
              <div class="share-segment competitor-share" style="width: 76%">
                <span class="share-label">Concurrentie: 76%</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Revenue Optimization -->
        <div class="analytics-panel revenue-optimization">
          <h3 class="panel-title">OMZET OPTIMALISATIE</h3>
          <div class="optimization-metrics">
            <div class="optimization-item">
              <div class="optimization-scenario">
                <span class="scenario-label">Huidige strategie:</span>
                <span class="scenario-value">â‚¬{{ section.settings.current_revenue | default: 45250 | money_without_currency }}/mnd</span>
              </div>
              <div class="optimization-scenario potential">
                <span class="scenario-label">Geoptimaliseerd:</span>
                <span class="scenario-value">â‚¬{{ section.settings.optimized_revenue | default: 52180 | money_without_currency }}/mnd</span>
              </div>
              <div class="optimization-impact">
                <span class="impact-label">PotentiÃ«le winst:</span>
                <span class="impact-value">+â‚¬{{ section.settings.potential_gain | default: 6930 | money_without_currency }}</span>
              </div>
            </div>
            <button class="optimization-btn" onclick="implementOptimization()">
              OPTIMALISATIE TOEPASSEN
            </button>
          </div>
        </div>

        <!-- Risk Assessment -->
        <div class="analytics-panel risk-assessment">
          <h3 class="panel-title">RISICO ANALYSE</h3>
          <div class="risk-indicators">
            <div class="risk-item low-risk">
              <span class="risk-icon">ðŸŸ¢</span>
              <div class="risk-details">
                <span class="risk-label">Prijselasticiteit</span>
                <span class="risk-value">Laag risico</span>
              </div>
            </div>
            <div class="risk-item medium-risk">
              <span class="risk-icon">ðŸŸ¡</span>
              <div class="risk-details">
                <span class="risk-label">Concurrentiedruk</span>
                <span class="risk-value">Gemiddeld</span>
              </div>
            </div>
            <div class="risk-item low-risk">
              <span class="risk-icon">ðŸŸ¢</span>
              <div class="risk-details">
                <span class="risk-label">Marktvolatiliteit</span>
                <span class="risk-value">Stabiel</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Recommendations -->
      <div class="analytics-panel ai-recommendations">
        <h3 class="panel-title">AI PRIJSAANBEVELINGEN</h3>
        <div class="recommendations-list">
          <div class="recommendation-item priority-high">
            <div class="recommendation-header">
              <span class="priority-badge high">HOGE PRIORITEIT</span>
              <span class="recommendation-title">Prijs aanpassing iPhone 15 Pro</span>
            </div>
            <div class="recommendation-content">
              <p class="recommendation-description">
                Concurrent Amazon verlaagde prijs met â‚¬70. Aanbeveling: verlaag met â‚¬45 voor optimale marktpositie.
              </p>
              <div class="recommendation-impact">
                <span class="impact-metric">Geschatte impact: +12% verkoop</span>
                <span class="impact-timeline">Implementeer binnen 2 uur</span>
              </div>
            </div>
            <div class="recommendation-actions">
              <button class="action-btn accept" onclick="acceptRecommendation('price-decrease')">
                ACCEPTEREN
              </button>
              <button class="action-btn decline">WEIGEREN</button>
            </div>
          </div>

          <div class="recommendation-item priority-medium">
            <div class="recommendation-header">
              <span class="priority-badge medium">GEMIDDELDE PRIORITEIT</span>
              <span class="recommendation-title">Bundle aanbieding MacBook + AirPods</span>
            </div>
            <div class="recommendation-content">
              <p class="recommendation-description">
                CreÃ«er bundel voor â‚¬1.399 (besparing â‚¬150). Verhoogt gemiddelde bestelwaarde en differentieert van concurrentie.
              </p>
              <div class="recommendation-impact">
                <span class="impact-metric">Geschatte impact: +8% marge</span>
                <span class="impact-timeline">Implementeer deze week</span>
              </div>
            </div>
            <div class="recommendation-actions">
              <button class="action-btn accept" onclick="acceptRecommendation('bundle-offer')">
                ACCEPTEREN
              </button>
              <button class="action-btn decline">WEIGEREN</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Business Export & Integration -->
    <div class="business-tools">
      <div class="tools-panel">
        <h3 class="tools-title">BUSINESS TOOLS & EXPORT</h3>
        <div class="tools-grid">
          <button class="tool-btn" onclick="exportAnalytics('pdf')">
            ðŸ“Š RAPPORT GENEREREN
          </button>
          <button class="tool-btn" onclick="scheduleReport()">
            ðŸ“… RAPPORTAGE PLANNEN
          </button>
          <button class="tool-btn" onclick="shareWithTeam()">
            ðŸ‘¥ DELEN MET TEAM
          </button>
          <button class="tool-btn" onclick="integrateWithCRM()">
            ðŸ”— CRM INTEGRATIE
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
// Business Analytics Functions
let analyticsChart;

document.addEventListener('DOMContentLoaded', function() {
  initializeBusinessAnalyticsChart();
  setupBusinessControls();
  startRealTimeUpdates();
});

function initializeBusinessAnalyticsChart() {
  const canvas = document.getElementById('BusinessAnalyticsChart');
  if (!canvas) return;

  const ctx = canvas.getContext('2d');
  
  // Simulate business analytics data
  const chartData = {
    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun'],
    datasets: [
      {
        label: 'Jouw omzet',
        data: [42000, 45000, 43000, 48000, 52000, 55000],
        borderColor: '#000',
        backgroundColor: 'rgba(0,0,0,0.1)',
        borderWidth: 3,
        fill: true
      },
      {
        label: 'Markt gemiddelde',
        data: [38000, 41000, 40000, 44000, 47000, 49000],
        borderColor: '#666',
        backgroundColor: 'rgba(102,102,102,0.1)',
        borderWidth: 2,
        borderDash: [5, 5],
        fill: false
      }
    ]
  };

  analyticsChart = new Chart(ctx, {
    type: 'line',
    data: chartData,
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: 'top',
          labels: {
            usePointStyle: true,
            font: {
              weight: 'bold'
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: false,
          ticks: {
            callback: function(value) {
              return 'â‚¬' + (value / 1000) + 'k';
            }
          }
        }
      }
    }
  });
}

function setupBusinessControls() {
  // Time range controls
  document.querySelectorAll('.time-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      updateChartTimeRange(this.dataset.range);
    });
  });

  // Chart view selector
  const chartView = document.getElementById('chart-view');
  if (chartView) {
    chartView.addEventListener('change', function() {
      updateChartView(this.value);
    });
  }
}

function updateChartTimeRange(range) {
  if (!analyticsChart) return;
  
  // Simulate different time ranges
  const data = {
    '7d': {
      labels: ['Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za', 'Zo'],
      revenue: [7200, 8100, 7800, 8500, 9200, 6800, 5900],
      market: [6800, 7500, 7200, 7900, 8400, 6200, 5400]
    },
    '30d': {
      labels: Array.from({length: 30}, (_, i) => `${i+1}`),
      revenue: Array.from({length: 30}, () => Math.floor(Math.random() * 3000) + 6000),
      market: Array.from({length: 30}, () => Math.floor(Math.random() * 2500) + 5500)
    }
  };

  const selectedData = data[range] || data['7d'];
  analyticsChart.data.labels = selectedData.labels;
  analyticsChart.data.datasets[0].data = selectedData.revenue;
  analyticsChart.data.datasets[1].data = selectedData.market;
  analyticsChart.update();
}

function updateChartView(view) {
  // Simulate different business views
  const viewData = {
    'profit': {
      title: 'Winst analyse',
      datasets: [
        { label: 'Bruto winst', data: [12000, 13500, 12800, 14200, 15600, 16500] },
        { label: 'Netto winst', data: [8400, 9450, 8960, 9940, 10920, 11550] }
      ]
    },
    'market-share': {
      title: 'Marktaandeel ontwikkeling',
      datasets: [
        { label: 'Jouw aandeel (%)', data: [22, 23, 22.5, 24, 25, 26] },
        { label: 'Doelstelling (%)', data: [25, 25, 25, 25, 25, 25] }
      ]
    }
  };

  if (analyticsChart && viewData[view]) {
    analyticsChart.data.datasets = viewData[view].datasets.map((dataset, index) => ({
      ...dataset,
      borderColor: index === 0 ? '#000' : '#666',
      backgroundColor: index === 0 ? 'rgba(0,0,0,0.1)' : 'rgba(102,102,102,0.1)',
      borderWidth: index === 0 ? 3 : 2
    }));
    analyticsChart.update();
  }
}

function startRealTimeUpdates() {
  // Simulate real-time business metrics updates
  setInterval(() => {
    updateBusinessMetrics();
  }, 30000); // Update every 30 seconds
}

function updateBusinessMetrics() {
  // Simulate metric updates
  const metrics = document.querySelectorAll('.metric-value');
  metrics.forEach(metric => {
    const currentValue = parseFloat(metric.textContent.replace(/[â‚¬%+]/g, ''));
    if (!isNaN(currentValue)) {
      const variation = (Math.random() - 0.5) * 0.1; // Â±5% variation
      const newValue = currentValue * (1 + variation);
      
      if (metric.textContent.includes('â‚¬')) {
        metric.textContent = 'â‚¬' + Math.round(newValue);
      } else if (metric.textContent.includes('%')) {
        metric.textContent = '+' + newValue.toFixed(1) + '%';
      }
    }
  });
}

// Business Action Functions
function implementOptimization() {
  if (confirm('Weet u zeker dat u de prijsoptimalisatie wilt implementeren? Dit zal de prijzen in uw Shopify store bijwerken.')) {
    alert('Optimalisatie wordt geÃ¯mplementeerd. U ontvangt een bevestiging via email.');
  }
}

function acceptRecommendation(type) {
  const actions = {
    'price-decrease': 'Prijsverlaging wordt geÃ¯mplementeerd binnen 15 minuten.',
    'bundle-offer': 'Bundle aanbieding wordt aangemaakt in uw Shopify store.'
  };
  
  alert(actions[type] || 'Aanbeveling wordt verwerkt.');
}

function exportAnalytics(format) {
  alert(`Analytics rapport wordt gegenereerd in ${format.toUpperCase()} formaat. Download start automatisch.`);
}

function scheduleReport() {
  alert('Rapportage planning interface wordt geopend...');
}

function shareWithTeam() {
  alert('Team sharing opties worden geladen...');
}

function integrateWithCRM() {
  alert('CRM integratie instellingen worden geopend...');
}
</script>

<style>
.pricing-analytics {
  padding: 3rem 0;
  background: #ffffff;
  color: #000000;
}

.pricing-analytics__header {
  text-align: center;
  margin-bottom: 3rem;
}

.analytics-title {
  font-size: 2.5rem;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: -1px;
  margin-bottom: 1rem;
}

.analytics-subtitle {
  font-size: 1.1rem;
  color: #666;
  margin-bottom: 2rem;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.performance-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  max-width: 1000px;
  margin: 0 auto;
}

.performance-metric {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  background: #000;
  color: #fff;
  text-align: left;
}

.metric-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.metric-info {
  flex: 1;
}

.metric-value {
  display: block;
  font-size: 1.8rem;
  font-weight: 900;
  margin-bottom: 0.25rem;
}

.metric-label {
  display: block;
  font-size: 0.9rem;
  opacity: 0.8;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.analytics-dashboard {
  margin-bottom: 3rem;
}

.analytics-panel {
  background: #f8f8f8;
  border: 2px solid #000;
  margin-bottom: 2rem;
}

.chart-panel {
  padding: 2rem;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.panel-title {
  font-size: 1.1rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 0;
}

.chart-controls {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.chart-select {
  padding: 0.5rem;
  border: 2px solid #000;
  background: #fff;
  font-weight: 600;
}

.time-range-controls {
  display: flex;
  gap: 0.5rem;
}

.time-btn {
  padding: 0.5rem 1rem;
  border: 2px solid #000;
  background: transparent;
  color: #000;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.time-btn.active,
.time-btn:hover {
  background: #000;
  color: #fff;
}

.chart-container {
  position: relative;
  height: 400px;
  margin-bottom: 1rem;
}

.chart-insights {
  display: flex;
  justify-content: space-around;
  padding: 1rem;
  background: #000;
  color: #fff;
  flex-wrap: wrap;
  gap: 1rem;
}

.insight-item {
  text-align: center;
}

.insight-label {
  display: block;
  font-size: 0.9rem;
  opacity: 0.8;
  margin-bottom: 0.25rem;
}

.insight-value {
  display: block;
  font-size: 1.2rem;
  font-weight: 700;
}

.price-optimal {
  color: #28a745;
}

.impact-positive {
  color: #ffc107;
}

.intelligence-panels {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-bottom: 2rem;
}

.market-position,
.revenue-optimization,
.risk-assessment {
  padding: 2rem;
}

.position-metrics {
  text-align: center;
}

.position-item {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}

.position-rank {
  font-size: 3rem;
  font-weight: 900;
  color: #28a745;
}

.position-label {
  font-weight: 600;
}

.position-change {
  font-size: 1.2rem;
  font-weight: 700;
}

.position-change.positive {
  color: #28a745;
}

.market-share-chart {
  height: 40px;
  background: #ddd;
  border-radius: 20px;
  overflow: hidden;
  position: relative;
  display: flex;
}

.share-segment {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
  color: #fff;
  transition: width 0.5s ease;
}

.your-share {
  background: #000;
}

.competitor-share {
  background: #666;
}

.optimization-metrics {
  space-y: 1rem;
}

.optimization-item {
  margin-bottom: 1.5rem;
}

.optimization-scenario {
  display: flex;
  justify-content: space-between;
  padding: 0.5rem 0;
  border-bottom: 1px solid #ddd;
}

.optimization-scenario.potential {
  font-weight: 700;
  color: #28a745;
}

.optimization-impact {
  display: flex;
  justify-content: space-between;
  padding: 1rem;
  background: #000;
  color: #fff;
  margin: 1rem 0;
}

.optimization-btn {
  width: 100%;
  padding: 1rem;
  border: 2px solid #000;
  background: #000;
  color: #fff;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.optimization-btn:hover {
  background: transparent;
  color: #000;
}

.risk-indicators {
  space-y: 1rem;
}

.risk-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background: #fff;
  border-left: 4px solid #ddd;
  margin-bottom: 1rem;
}

.risk-item.low-risk {
  border-left-color: #28a745;
}

.risk-item.medium-risk {
  border-left-color: #ffc107;
}

.risk-item.high-risk {
  border-left-color: #dc3545;
}

.risk-icon {
  font-size: 1.5rem;
}

.risk-details {
  flex: 1;
}

.risk-label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.risk-value {
  display: block;
  font-size: 0.9rem;
  color: #666;
}

.ai-recommendations {
  padding: 2rem;
}

.recommendations-list {
  space-y: 1.5rem;
}

.recommendation-item {
  background: #fff;
  border: 2px solid #ddd;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
}

.recommendation-item.priority-high {
  border-color: #dc3545;
  background: #fff5f5;
}

.recommendation-item.priority-medium {
  border-color: #ffc107;
  background: #fffbf0;
}

.recommendation-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.priority-badge {
  padding: 0.25rem 0.75rem;
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #fff;
  border-radius: 3px;
}

.priority-badge.high {
  background: #dc3545;
}

.priority-badge.medium {
  background: #ffc107;
  color: #000;
}

.recommendation-title {
  font-weight: 700;
}

.recommendation-description {
  margin-bottom: 1rem;
  line-height: 1.5;
}

.recommendation-impact {
  display: flex;
  justify-content: space-between;
  margin-bottom: 1rem;
  font-size: 0.9rem;
}

.impact-metric {
  color: #28a745;
  font-weight: 600;
}

.impact-timeline {
  color: #666;
  font-style: italic;
}

.recommendation-actions {
  display: flex;
  gap: 1rem;
}

.action-btn {
  padding: 0.75rem 1.5rem;
  border: 2px solid #000;
  background: transparent;
  color: #000;
  font-weight: 600;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.2s ease;
}

.action-btn.accept {
  background: #000;
  color: #fff;
}

.action-btn:hover {
  background: #000;
  color: #fff;
}

.action-btn.accept:hover {
  background: #28a745;
  border-color: #28a745;
}

.business-tools {
  background: #000;
  color: #fff;
  padding: 2rem;
}

.tools-title {
  font-size: 1.3rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 1.5rem;
  text-align: center;
}

.tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.tool-btn {
  padding: 1rem;
  border: 2px solid #fff;
  background: transparent;
  color: #fff;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.tool-btn:hover {
  background: #fff;
  color: #000;
}

@media (max-width: 768px) {
  .performance-overview {
    grid-template-columns: 1fr;
  }
  
  .intelligence-panels {
    grid-template-columns: 1fr;
  }
  
  .panel-header {
    flex-direction: column;
    align-items: stretch;
  }
  
  .chart-controls {
    justify-content: center;
  }
  
  .tools-grid {
    grid-template-columns: 1fr;
  }
  
  .recommendation-actions {
    flex-direction: column;
  }
  
  .chart-insights {
    flex-direction: column;
    text-align: center;
  }
}
</style>

{% schema %}
{
  "name": "Pricing Analytics & Intelligence",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Analytics heading",

{% schema %}
{
  "name": "Price history",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Historische prijsontwikkelingen"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Zie trends, promoties en kansrijke momenten."
    }
  ],
  "presets": [
    {
      "name": "Price history"
    }
  ]
}
{% endschema %}
