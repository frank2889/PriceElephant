<section class="home-featured-deals">
  <div class="container">
    <header class="home-featured-deals__header">
      <h2>{{ section.settings.heading }}</h2>
      <p>{{ section.settings.subheading }}</p>
    </header>
    <div class="home-featured-deals__grid">
      {% assign featured_collection = collections[section.settings.collection] %}
      {% if featured_collection and featured_collection.products_count > 0 %}
        {% for product in featured_collection.products | limit: section.settings.limit %}
          <article class="home-featured-deals__card">
            <a href="{{ product.url }}" class="home-featured-deals__link">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '400x400' }}" alt="{{ product.featured_image.alt | escape }}" loading="lazy">
              {% endif %}
              <h3>{{ product.title }}</h3>
              <div class="home-featured-deals__price">{{ product.price | money }}</div>
            </a>
            {% render 'price-trend-badge', product: product %}
          </article>
        {% endfor %}
      {% else %}
        <p>{{ 'priceelephant.no_featured_products' | t }}</p>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Home featured deals",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Trending deals"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Kies uit populaire producten met realtime prijsinformatie."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "number",
      "id": "limit",
      "label": "Number of products",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Home featured deals"
    }
  ]
}
{% endschema %}
